// set as java application
apply plugin: 'application'

//define main class
mainClassName = 'Assign32starter.SockServer'

repositories {
    mavenCentral()
}

dependencies {
    implementation group: 'org.json', name: 'json', version: '20200518'
}

task runClient(type: JavaExec) {
  group 'TCP Server/Client'
  description 'Runs the Client GUI'

  standardInput = System.in
  classpath = sourceSets.main.runtimeClasspath
  main = 'Assign32starter.ClientGui'

  if (project.hasProperty('port') && project.hasProperty('host')) {
    args project.host
    args project.port
  } else {
    args "localhost"
    args "9000"
  }
}

task runServer(type: JavaExec) {
  group 'TCP Server/Client'
  description 'Runs the Server'

  classpath = sourceSets.main.runtimeClasspath
  main = 'Assign32starter.SockServer'

  if (project.hasProperty('port')) {
    args project.port
  } else {
    args "9000" // Default Port
  }
}

task runTests(type: JavaExec) {
  group 'Testing'
  description 'Runs unit tests'

  classpath = sourceSets.test.runtimeClasspath
  main = 'org.junit.runner.JUnitCore'
  args 'ServerTest'
}